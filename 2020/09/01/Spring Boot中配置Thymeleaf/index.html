<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tukekenulia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="学习使用Thymeleaf，并在Spring boot中实现。">
<meta property="og:type" content="article">
<meta property="og:title" content="Tukekenulia">
<meta property="og:url" content="http://yoursite.com/2020/09/01/Spring%20Boot%E4%B8%AD%E9%85%8D%E7%BD%AEThymeleaf/index.html">
<meta property="og:site_name" content="Tukekenulia">
<meta property="og:description" content="学习使用Thymeleaf，并在Spring boot中实现。">
<meta property="og:locale">
<meta property="article:published_time" content="2020-09-01T11:09:18.000Z">
<meta property="article:modified_time" content="2020-09-01T11:09:18.000Z">
<meta property="article:author" content="Tukeke">
<meta name="twitter:card" content="summary">
  
  
    <link rel="icon" href="/11.png">
  
  <link type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/scrollUp/image.css">

  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
<meta name="generator" content="Hexo 6.3.0"></head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <div class="logo">
        <img src="/logo.png" alt="Profile Picture">
      </div>
      <div id="title">Tukekenulia</div>
      
        <div id="subtitle">Stay focus,stay humble,stay curiosity.</div>
      
       <ul class="my-socials">
  
  <li>
  	<a href="https://github.com/Tukekehaohaonuli" class="github" target="_blank">
  		<i class="fa fa-github"></i>
  	</a>
  </li>
  
  <li>
  	<a href="YOUR WEIBO HOME PAGE URL" class="weibo" target="_blank">
  		<i class="fa fa-weibo"></i>
  	</a>
  </li>
  
 
</ul>
    </div>
  </div>
  <div id="header-inner" class="">
    <nav id="main-nav">
      <a id="main-nav-toggle" class="nav-icon"></a>
      <!--
        
          
            <a class="main-nav-link" href="/">首页</a>
          
            <a class="main-nav-link" href="/categories/life">生活</a>
          
            <a class="main-nav-link" href="/archives">归档</a>
          
        
      -->
    </nav>
    <nav id="title-nav" style="display:none">
      <a href="/">Tukekenulia</a>
      <img src="/logo.png" alt="Profile Picture">
      <!--
      <span id="title-nav-socials">
        
       
     </span>
      -->
    </nav>
    <nav id="sub-nav">
      
      <a id="nav-search-btn" class="nav-icon" title="Search"></a>
    </nav>
    <div id="search-form-wrap">
      <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
        <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
        <input type="submit" value="" class="search-form-submit">
        <input name=tn type=hidden value="bds">
        <input name=cl type=hidden value="3">
        <input name=ct type=hidden value="2097152">
        <input type="hidden" name="si" value="yoursite.com">
      </form>
    </div>
  </div>
  <div class="site-nav" style="display: none;">
    <ul>
      
      
        <li><a href="/">首页</a></li>
      
        <li><a href="/categories/life">生活</a></li>
      
        <li><a href="/archives">归档</a></li>
      
      
    </ul>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Spring Boot中配置Thymeleaf" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2020/09/01/Spring%20Boot%E4%B8%AD%E9%85%8D%E7%BD%AEThymeleaf/" class="article-date">
  <time datetime="2020-09-01T11:09:18.000Z" itemprop="datePublished">2020-09-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>学习使用Thymeleaf，并在Spring boot中实现。</p>
<span id="more"></span>

<h1 id="1-Thymeleaf"><a href="#1-Thymeleaf" class="headerlink" title="1-Thymeleaf"></a>1-Thymeleaf</h1><p>完全可以替代JSP</p>
<p>在 application.properties 中添加配置：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spring.thymeleaf.cache=false</span><br></pre></td></tr></table></figure>

<p>propertiesspring.thymeleaf.cache&#x3D;false 是关闭 Thymeleaf 的缓存，不然在开发过程中修改页面不会立刻生效需要重启，生产可配置为 true。</p>
<h3 id="案例："><a href="#案例：" class="headerlink" title="案例："></a>案例：</h3><p>页面 string.html：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;  xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;&lt;/meta&gt;</span><br><span class="line">    &lt;title&gt;Example String &lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div &gt;</span><br><span class="line">        &lt;h1&gt;text&lt;/h1&gt;</span><br><span class="line">        &lt;p th:text=&quot;$&#123;userName&#125;&quot;&gt;neo&lt;/p&gt;</span><br><span class="line">        &lt;span th:text=&quot;&#x27;Welcome to our application, &#x27; + $&#123;userName&#125; + &#x27;!&#x27;&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;br/&gt;</span><br><span class="line">        &lt;span th:text=&quot;|Welcome to our application, $&#123;userName&#125;!|&quot;&gt;&lt;/span&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>所有使用 Thymeleaf 的页面必须在 HTML 标签声明 Thymeleaf：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br></pre></td></tr></table></figure>

<p>表明页面使用的是 Thymeleaf 语法。</p>
<p>Controller</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Controller</span><br><span class="line">public class HelloController &#123;</span><br><span class="line">    @RequestMapping(&quot;/&quot;)</span><br><span class="line">    public String index(ModelMap map) &#123;</span><br><span class="line">        map.addAttribute(&quot;message&quot;, &quot;http://www.ityouknow.com&quot;);</span><br><span class="line">        return &quot;hello&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用 ModelMap 以 KV 的方式存储传递到页面。</p>
<h3 id="for循环："><a href="#for循环：" class="headerlink" title="for循环："></a>for循环：</h3><p>后端：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/list&quot;)</span><br><span class="line">public String list(ModelMap map) &#123;</span><br><span class="line">    map.addAttribute(&quot;users&quot;, getUserList());</span><br><span class="line">    return &quot;list&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div &gt;</span><br><span class="line">    &lt;h1&gt;for 循环&lt;/h1&gt;</span><br><span class="line">    &lt;table&gt;</span><br><span class="line">        &lt;tr  th:each=&quot;user,iterStat : $&#123;users&#125;&quot;&gt;</span><br><span class="line">            &lt;td th:text=&quot;$&#123;user.name&#125;&quot;&gt;neo&lt;/td&gt;</span><br><span class="line">            &lt;td th:text=&quot;$&#123;user.age&#125;&quot;&gt;6&lt;/td&gt;</span><br><span class="line">            &lt;td th:text=&quot;$&#123;user.pass&#125;&quot;&gt;213&lt;/td&gt;</span><br><span class="line">            &lt;td th:text=&quot;$&#123;iterStat.index&#125;&quot;&gt;index&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>iterStat 称作状态变量，属性有：</p>
<ul>
<li>index，当前迭代对象的 index（从 0 开始计算）；</li>
<li>count，当前迭代对象的 index（从 1 开始计算）；</li>
<li>size，被迭代对象的大小；</li>
<li>current，当前迭代变量；</li>
<li>even&#x2F;odd，布尔值，当前循环是否是偶数&#x2F;奇数（从 0 开始计算）；</li>
<li>first，布尔值，当前循环是否是第一个；</li>
<li>last，布尔值，当前循环是否是最后一个。</li>
</ul>
<h3 id="三目运算符"><a href="#三目运算符" class="headerlink" title="三目运算符:"></a>三目运算符:</h3><ul>
<li>gt：great than（大于）</li>
<li>ge：great equal（大于等于）</li>
<li>eq：equal（等于）</li>
<li>lt：less than（小于）</li>
<li>le：less equal（小于等于）</li>
<li>ne：not equal（不等于）</li>
</ul>
<p>三目运算及表单显示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;input th:value=&quot;$&#123;name&#125;&quot;/&gt;</span><br><span class="line">&lt;input th:value=&quot;$&#123;age gt 30 ? &#x27;中年&#x27;:&#x27;年轻&#x27;&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="内联"><a href="#内联" class="headerlink" title="内联 [ [ ] ]"></a>内联 [ [ ] ]</h3><p>必须先用在 th:inline&#x3D;”text&#x2F;javascript&#x2F;none” 激活.</p>
<p>页面 inline.html（文本内联）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;h1&gt;内联&lt;/h1&gt;</span><br><span class="line">    &lt;div th:inline=&quot;text&quot; &gt;</span><br><span class="line">        &lt;p&gt;Hello, [[$&#123;userName&#125;]] !&lt;/p&gt;</span><br><span class="line">        &lt;br/&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>脚本内联:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script th:inline=&quot;javascript&quot;&gt;</span><br><span class="line">    var name = [[$&#123;userName&#125;]] + &#x27;, Sebastian&#x27;;</span><br><span class="line">    alert(name);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="基本对象"><a href="#基本对象" class="headerlink" title="基本对象"></a>基本对象</h3><p>Thymeleaf 包含了一些基本对象，可以用于我们的视图中，这些基本对象使用 # 开头。</p>
<ul>
<li><code>#ctx</code>：上下文对象</li>
<li><code>#vars</code>：上下文变量</li>
<li><code>#locale</code>：区域对象</li>
<li><code>#request</code>：（仅 Web 环境可用）HttpServletRequest 对象</li>
<li><code>#response</code>：（仅 Web 环境可用）HttpServletResponse 对象</li>
<li><code>#session</code>：（仅 Web 环境可用）HttpSession 对象</li>
<li><code>#servletContext</code>：（仅 Web 环境可用）ServletContext 对象</li>
</ul>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p th:text=&quot;$&#123;#request.getAttribute(&#x27;request&#x27;)&#125;&quot;/&gt;</span><br><span class="line">&lt;p th:text=&quot;$&#123;session.session&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="内嵌变量"><a href="#内嵌变量" class="headerlink" title="内嵌变量"></a>内嵌变量</h3><p>为了模板更加易用，Thymeleaf 还提供了一系列 Utility 对象（内置于 Context 中），可以通过 # 直接访问。</p>
<ul>
<li>dates：java.util.Date 的功能方法类</li>
<li>calendars：类似 #dates，面向 java.util.Calendar</li>
<li>numbers：格式化数字的功能方法类</li>
<li>strings：字符串对象的功能类，contains、startWiths、prepending&#x2F;appending 等</li>
<li>objects：对 objects 的功能类操作</li>
<li>bools：对布尔值求值的功能方法</li>
<li>arrays：对数组的功能类方法</li>
<li>lists：对 lists 的功能类方法</li>
<li>sets：set 的实用方法</li>
<li>maps：map 的实用方法</li>
</ul>
<p><strong>1. dates</strong></p>
<p>可以使用 dates 对日期格式化，创建当前时间等操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--格式化时间--&gt;</span><br><span class="line">&lt;p th:text=&quot;$&#123;#dates.format(date, &#x27;yyyy-MM-dd HH:mm:ss&#x27;)&#125;&quot;&gt;neo&lt;/p&gt;</span><br><span class="line">&lt;!--创建当前时间 精确到天--&gt;</span><br><span class="line">&lt;p th:text=&quot;$&#123;#dates.createToday()&#125;&quot;&gt;neo&lt;/p&gt;</span><br><span class="line">&lt;!--创建当前时间 精确到秒--&gt;</span><br><span class="line">&lt;p th:text=&quot;$&#123;#dates.createNow()&#125;&quot;&gt;neo&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<p><strong>2. strings</strong></p>
<p>strings 内置了一些对字符串经常使用的函数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--判断是否为空--&gt;</span><br><span class="line">&lt;p th:text=&quot;$&#123;#strings.isEmpty(userName)&#125;&quot;&gt;userName&lt;/p&gt;</span><br><span class="line">&lt;!--判断 list 是否为空--&gt;</span><br><span class="line">&lt;p th:text=&quot;$&#123;#strings.listIsEmpty(users)&#125;&quot;&gt;userName&lt;/p&gt;</span><br><span class="line">&lt;!--输出字符串长度--&gt;</span><br><span class="line">&lt;p th:text=&quot;$&#123;#strings.length(userName)&#125;&quot;&gt;userName&lt;/p&gt;</span><br><span class="line">&lt;!--拼接字符串--&gt;</span><br><span class="line">&lt;p th:text=&quot;$&#123;#strings.concat(userName,userName,userName)&#125;&quot;&gt;&lt;/p&gt;</span><br><span class="line">&lt;!--创建自定长度的字符串--&gt;</span><br><span class="line">&lt;p th:text=&quot;$&#123;#strings.randomAlphanumeric(count)&#125;&quot;&gt;userName&lt;/p&gt;</span><br></pre></td></tr></table></figure>

<h3 id="表达式"><a href="#表达式" class="headerlink" title="表达式"></a>表达式</h3><p>表达式共分为以下五类。</p>
<ul>
<li>变量表达式：${…}</li>
<li>选择或星号表达式：*{…}</li>
<li>文字国际化表达式：#{…}</li>
<li>URL 表达式：@{…}</li>
<li>片段表达式：~{…}</li>
</ul>
<h4 id="选择（星号）表达式"><a href="#选择（星号）表达式" class="headerlink" title="选择（星号）表达式"></a>选择（星号）表达式</h4><p>选择表达式很像变量表达式，不过它们用一个预先选择的对象来代替上下文变量容器（map）来执行，类似：<code>*&#123;customer.name&#125;</code>。</p>
<p>被指定的 object 由 th:object 属性定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div th:object=&quot;$&#123;book&#125;&quot;&gt;  </span><br><span class="line">  ...  </span><br><span class="line">  &lt;span th:text=&quot;*&#123;title&#125;&quot;&gt;...&lt;/span&gt;  </span><br><span class="line">  ...  </span><br><span class="line">&lt;/div&gt;  </span><br><span class="line">复制</span><br></pre></td></tr></table></figure>

<p>title 即为 book 的属性。</p>
<h4 id="文字国际化表达式"><a href="#文字国际化表达式" class="headerlink" title="文字国际化表达式"></a>文字国际化表达式</h4><p>文字国际化表达式允许我们从一个外部文件获取区域文字信息（.properties），用 Key 索引 Value，还可以提供一组参数（可选）。</p>
<p>可以在模板文件中找到这样的表达式代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;table&gt;  </span><br><span class="line">  ...  </span><br><span class="line">  &lt;th th:text=&quot;#&#123;header.address.city&#125;&quot;&gt;...&lt;/th&gt;  </span><br><span class="line">  &lt;th th:text=&quot;#&#123;header.address.country&#125;&quot;&gt;...&lt;/th&gt;  </span><br><span class="line">  ...  </span><br><span class="line">&lt;/table&gt;  </span><br></pre></td></tr></table></figure>

<h3 id="常用-th-标签"><a href="#常用-th-标签" class="headerlink" title="常用 th 标签"></a>常用 th 标签</h3><p>页面常用的 HTML 标签几乎都有 Thymeleaf 对应的 th 标签。</p>
<table>
<thead>
<tr>
<th align="left">关键字</th>
<th align="left">功能介绍</th>
<th align="left">案例</th>
</tr>
</thead>
<tbody><tr>
<td align="left">th:id</td>
<td align="left">替换 id</td>
<td align="left"><code>&lt;input th:id=&quot;&#39;xxx&#39; + $&#123;collect.id&#125;&quot;/&gt;</code></td>
</tr>
<tr>
<td align="left">th:text</td>
<td align="left">文本替换</td>
<td align="left"><code>&lt;p th:text=&quot;$&#123;collect.description&#125;&quot;&gt;description&lt;/p&gt;</code></td>
</tr>
<tr>
<td align="left">th:utext</td>
<td align="left">支持 html 的文本替换</td>
<td align="left"><code>&lt;p th:utext=&quot;$&#123;htmlcontent&#125;&quot;&gt;conten&lt;/p&gt;</code></td>
</tr>
<tr>
<td align="left">th:object</td>
<td align="left">替换对象</td>
<td align="left"><code>&lt;div th:object=&quot;$&#123;session.user&#125;&quot;&gt;</code></td>
</tr>
<tr>
<td align="left">th:value</td>
<td align="left">属性赋值</td>
<td align="left"><code>&lt;input th:value=&quot;$&#123;user.name&#125;&quot; /&gt;</code></td>
</tr>
<tr>
<td align="left">th:with</td>
<td align="left">变量赋值运算</td>
<td align="left"><code>&lt;div th:with=&quot;isEven=$&#123;prodStat.count&#125;%2==0&quot;&gt;&lt;/div&gt;</code></td>
</tr>
<tr>
<td align="left">th:style</td>
<td align="left">设置样式</td>
<td align="left"><code>th:style=&quot;&#39;display:&#39; + @&#123;($&#123;sitrue&#125; ? &#39;none&#39; : &#39;inline-block&#39;)&#125; + &#39;&#39;&quot;</code></td>
</tr>
<tr>
<td align="left">th:onclick</td>
<td align="left">点击事件</td>
<td align="left"><code>th:onclick=&quot;&#39;getCollect()&#39;&quot;</code></td>
</tr>
<tr>
<td align="left">th:each</td>
<td align="left">属性赋值</td>
<td align="left"><code>tr th:each=&quot;user,userStat:$&#123;users&#125;&quot;&gt;</code></td>
</tr>
<tr>
<td align="left">th:if</td>
<td align="left">判断条件</td>
<td align="left"><code>&lt;a th:if=&quot;$&#123;userId == collect.userId&#125;&quot; &gt;</code></td>
</tr>
<tr>
<td align="left">th:unless</td>
<td align="left">和 th:if 判断相反</td>
<td align="left"><code>&lt;a th:href=&quot;@&#123;/login&#125;&quot; th:unless=$&#123;session.user != null&#125;&gt;Login&lt;/a&gt;</code></td>
</tr>
<tr>
<td align="left">th:href</td>
<td align="left">链接地址</td>
<td align="left"><code>&lt;a th:href=&quot;@&#123;/login&#125;&quot; th:unless=$&#123;session.user != null&#125;&gt;Login&lt;/a&gt; /&gt;</code></td>
</tr>
<tr>
<td align="left">th:switch</td>
<td align="left">多路选择 配合 th:case 使用</td>
<td align="left"><code>&lt;div th:switch=&quot;$&#123;user.role&#125;&quot;&gt;</code></td>
</tr>
<tr>
<td align="left">th:case</td>
<td align="left">th:switch 的一个分支</td>
<td align="left"><code>&lt;p th:case=&quot;&#39;admin&#39;&quot;&gt;User is an administrator&lt;/p&gt;</code></td>
</tr>
<tr>
<td align="left">th:fragment</td>
<td align="left">布局标签，定义一个代码片段，方便其他地方引用</td>
<td align="left"><code>&lt;div th:fragment=&quot;alert&quot;&gt;</code></td>
</tr>
<tr>
<td align="left">th:include</td>
<td align="left">布局标签，替换内容到引入的文件</td>
<td align="left"><code>&lt;head th:include=&quot;layout :: htmlhead&quot; th:with=&quot;title=&#39;xx&#39;&quot;&gt;&lt;/head&gt; /&gt;</code></td>
</tr>
<tr>
<td align="left">th:replace</td>
<td align="left">布局标签，替换整个标签到引入的文件</td>
<td align="left"><code>&lt;div th:replace=&quot;fragments/header :: title&quot;&gt;&lt;/div&gt;</code></td>
</tr>
<tr>
<td align="left">th:selected</td>
<td align="left">selected 选择框 选中</td>
<td align="left"><code>th:selected=&quot;($&#123;xxx.id&#125; == $&#123;configObj.dd&#125;)&quot;</code></td>
</tr>
<tr>
<td align="left">th:src</td>
<td align="left">图片类地址引入</td>
<td align="left"><code>&lt;img class=&quot;img-responsive&quot; alt=&quot;App Logo&quot; th:src=&quot;@&#123;/img/logo.png&#125;&quot; /&gt;</code></td>
</tr>
<tr>
<td align="left">th:inline</td>
<td align="left">定义 js 脚本可以使用变量</td>
<td align="left"><code>&lt;script type=&quot;text/javascript&quot; th:inline=&quot;javascript&quot;&gt;</code></td>
</tr>
<tr>
<td align="left">th:action</td>
<td align="left">表单提交的地址</td>
<td align="left"><code>&lt;form action=&quot;subscribe.html&quot; th:action=&quot;@&#123;/subscribe&#125;&quot;&gt;</code></td>
</tr>
<tr>
<td align="left">th:remove</td>
<td align="left">删除某个属性</td>
<td align="left"><code>&lt;tr th:remove=&quot;all&quot;&gt;</code> 1.all：删除包含标签和所有的子节点； 2.body：不包含标记删除，但删除其所有的子节点； 3.tag：包含标记的删除，但不删除它的子节点； 4.all-but-first：删除所有包含标签的子节点，除了第一个。 5.none：什么也不做。这个值是有用的动态评估</td>
</tr>
<tr>
<td align="left">th:attr</td>
<td align="left">设置标签属性，多个属性可以用逗号分隔</td>
<td align="left">比如 th:attr&#x3D;”src&#x3D;@{&#x2F;image&#x2F;aa.jpg},title&#x3D;#{logo}”，此标签不太优雅，一般用的比较少</td>
</tr>
</tbody></table>
<h3 id="Thymeleaf-配置"><a href="#Thymeleaf-配置" class="headerlink" title="Thymeleaf 配置"></a>Thymeleaf 配置</h3><p>我们可以通过 application.properties 文件灵活的配置 Thymeleaf 的各项特性，以下为 Thymeleaf 的配置和默认参数：	</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># THYMELEAF (ThymeleafAutoConfiguration)</span><br><span class="line">#开启模板缓存（默认值：true）</span><br><span class="line">spring.thymeleaf.cache=true </span><br><span class="line">#检查模板是否存在，然后再呈现</span><br><span class="line">spring.thymeleaf.check-template=true </span><br><span class="line">#检查模板位置是否正确（默认值:true）</span><br><span class="line">spring.thymeleaf.check-template-location=true</span><br><span class="line">#Content-Type的值（默认值：text/html）</span><br><span class="line">spring.thymeleaf.content-type=text/html</span><br><span class="line">#开启MVC Thymeleaf视图解析（默认值：true）</span><br><span class="line">spring.thymeleaf.enabled=true</span><br><span class="line">#模板编码</span><br><span class="line">spring.thymeleaf.encoding=UTF-8</span><br><span class="line">#要被排除在解析之外的视图名称列表，用逗号分隔</span><br><span class="line">spring.thymeleaf.excluded-view-names=</span><br><span class="line">#要运用于模板之上的模板模式。另见StandardTemplate-ModeHandlers(默认值：HTML5)</span><br><span class="line">spring.thymeleaf.mode=HTML5</span><br><span class="line">#在构建URL时添加到视图名称前的前缀（默认值：classpath:/templates/）</span><br><span class="line">spring.thymeleaf.prefix=classpath:/templates/</span><br><span class="line">#在构建URL时添加到视图名称后的后缀（默认值：.html）</span><br><span class="line">spring.thymeleaf.suffix=.html</span><br><span class="line">#Thymeleaf 模板解析器在解析器链中的顺序，默认情况下，它排第一位，顺序从1开始，只有在定义了额外的 TemplateResolver Bean 时才需要设置这个属性。</span><br><span class="line">spring.thymeleaf.template-resolver-order=</span><br><span class="line">#可解析的视图名称列表，用逗号分隔</span><br><span class="line">spring.thymeleaf.view-names=</span><br></pre></td></tr></table></figure>

<h3 id="Thymeleaf布局："><a href="#Thymeleaf布局：" class="headerlink" title="Thymeleaf布局："></a>Thymeleaf布局：</h3><p>额外引入依赖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;nz.net.ultraq.thymeleaf&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;thymeleaf-layout-dialect&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>

<p><strong>Thymeleaf 3.0 推荐使用 th:insert 替换 2.0 的 th:replace。</strong></p>
<p>布局的语法命名空间：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xmlns:layout=&quot;http://www.ultraq.net.nz/web/thymeleaf/layout&quot;</span><br></pre></td></tr></table></figure>

<p>页面布局模板:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot; xmlns:layout=&quot;http://www.ultraq.net.nz/web/thymeleaf/layout&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;&lt;/meta&gt;</span><br><span class="line">    &lt;title&gt;Layout&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div &gt;</span><br><span class="line">    &lt;div th:replace=&quot;layout/header :: header&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div th:replace=&quot;layout/left :: left&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div layout:fragment=&quot;content&quot; &gt; content&lt;/div&gt;</span><br><span class="line">    &lt;div th:replace=&quot;layout/footer :: footer&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>footer.html:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;&lt;/meta&gt;</span><br><span class="line">    &lt;title&gt;footer&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;footer th:fragment=&quot;footer&quot;&gt;</span><br><span class="line">    &lt;h1&gt;我是 尾部&lt;/h1&gt;</span><br><span class="line">&lt;/footer&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>以 layout.html 作为一个页面模板，任何页面想使用此布局时，只需要替换中间的 content 模块即可，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;  xmlns:layout=&quot;http://www.ultraq.net.nz/web/thymeleaf/layout&quot; layout:decorate=&quot;layout&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;&lt;/meta&gt;</span><br><span class="line">    &lt;title&gt;Home&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div layout:fragment=&quot;content&quot; &gt;</span><br><span class="line">        &lt;h2&gt;个性化的内容&lt;/h2&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>&lt;html&gt;</code>标签中添加 layout:decorate&#x3D;”layout” 使用 layout.html 页面的布局。</li>
<li><code>&lt;div layout:fragment=&quot;content&quot; &gt;</code>替换 layout.html 页面中的 content 代码片段。</li>
<li><strong>layout:decorator 标签在 3.0 过期，推荐使用新的标签 layout:decorate 进行页面布局。</strong></li>
</ul>
<h1 id="2-Springboot和Thymeleaf上传文件"><a href="#2-Springboot和Thymeleaf上传文件" class="headerlink" title="2-Springboot和Thymeleaf上传文件"></a>2-Springboot和Thymeleaf上传文件</h1><p>Spring Boot 利用 MultipartFile 的特性来接收和处理上传的文件</p>
<p>常用的配置信息如下：</p>
<ul>
<li>spring.servlet.multipart.enabled&#x3D;true，是否支持 multipart 上传文件</li>
<li>spring.servlet.multipart.file-size-threshold&#x3D;0，支持文件写入磁盘</li>
<li>spring.servlet.multipart.location&#x3D;，上传文件的临时目录</li>
<li>spring.servlet.multipart.max-file-size&#x3D;10Mb，最大支持文件大小</li>
<li>spring.servlet.multipart.max-request-size&#x3D;10Mb，最大支持请求大小</li>
<li>spring.servlet.multipart.resolve-lazily&#x3D;false，是否支持 multipart 上传文件时懒加载</li>
</ul>
<h5 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h5><h4 id="编写前端页面"><a href="#编写前端页面" class="headerlink" title="编写前端页面"></a>编写前端页面</h4><p>上传页面：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Spring Boot file upload example&lt;/h1&gt;</span><br><span class="line">&lt;form method=&quot;POST&quot; action=&quot;/upload&quot; enctype=&quot;multipart/form-data&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;Submit&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>上传结果展示页面：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;Spring Boot - Upload Status&lt;/h1&gt;</span><br><span class="line">&lt;div th:if=&quot;$&#123;message&#125;&quot;&gt;</span><br><span class="line">    &lt;h2 th:text=&quot;$&#123;message&#125;&quot;/&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>上传业务处理：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">private static final String UPLOADED_FOLDER = &quot;d:/&quot;;</span><br><span class="line">@PostMapping(&quot;/upload&quot;) </span><br><span class="line">//如果有多个file，则改为MultipartFile[] files</span><br><span class="line">public String singleFileUpload(@RequestParam(&quot;file&quot;) MultipartFile file,</span><br><span class="line">                               RedirectAttributes redirectAttributes) &#123;</span><br><span class="line">    if (file.isEmpty()) &#123;</span><br><span class="line">        redirectAttributes.addFlashAttribute(&quot;message&quot;, &quot;Please select a file to upload&quot;);</span><br><span class="line">        return &quot;redirect:uploadStatus&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    try &#123;</span><br><span class="line">        // Get the file and save it somewhere</span><br><span class="line">        byte[] bytes = file.getBytes();</span><br><span class="line">        // UPLOADED_FOLDER 文件本地存储地址</span><br><span class="line">        Path path = Paths.get(UPLOADED_FOLDER + file.getOriginalFilename());</span><br><span class="line">        Files.write(path, bytes);</span><br><span class="line"></span><br><span class="line">        redirectAttributes.addFlashAttribute(&quot;message&quot;,</span><br><span class="line">                &quot;You successfully uploaded &#x27;&quot; + file.getOriginalFilename() + &quot;&#x27;&quot;);</span><br><span class="line"></span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    return &quot;redirect:/uploadStatus&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;/uploadStatus&quot;)</span><br><span class="line">    public String uploadStatus()&#123;</span><br><span class="line">        return &quot;result&quot;;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2020/09/01/Spring%20Boot%E4%B8%AD%E9%85%8D%E7%BD%AEThymeleaf/" data-id="cll1oc7vb0016o4cp5hmha6aa" class="article-share-link">Share</a>
      

      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/09/01/Restful/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2020/09/01/FastFDS%E3%80%81Nginx%E9%85%8D%E7%BD%AE%E4%B8%8E%E4%BD%BF%E7%94%A8/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>

</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 Tukeke<br>
      Theme <a href="https://github.com/Tukekehaohaonuli/" target="_blank">Oishi</a>, Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <!--
      <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/categories/life" class="mobile-nav-link">生活</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    -->
    

<!-- 百度分享 start -->

<!-- 百度分享 end -->

<script src="//cdn.bootcss.com/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/jquery.scrollUp.min.js"></script>


<script src="/js/jquery.transform.js"></script>


<script src="/js/menu.js"></script>



<script src="/js/script.js"></script>


<script src="/js/scrollUp.js"></script>


  </div>
</body>
</html>